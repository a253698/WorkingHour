<!DOCTYPE html>
<html>

<head>
    <title>產線工時計算器</title>
    <link rel="stylesheet" type="text/css" href="style.css/" />
    <meta charset="UTF-8">
</head>

<body>

    <h1>產線工時計算器</h1>
    <h5>工作時間：08:00~10:00 / 工作時間：10:15~12:15 / 工作時間：13:00~15:15 / 工作時間：15:15~17:15</h5>
    <p>
        <input type="radio" id="cut" name="workType">
        <label for="male">裁切</label>
        <input type="radio" id="print" name="workType">
        <label for="female">噴印</label>
        <input type="radio" id="buildup" name="workType">
        <label for="other">組裝</label>
        <input type="radio" id="bag" name="workType">
        <label for="other">入袋</label>
        <input type="radio" id="seal" name="workType">
        <label for="other">封口</label>
        <input type="radio" id="colorBox" name="workType">
        <label for="other">入彩盒</label>
        <input type="radio" id="sticker" name="workType">
        <label for="other">貼貼紙</label>
        <input type="radio" id="box" name="workType">
        <label for="other">盒裝</label>
        <input type="radio" id="qc" name="workType">
        <label for="other">QC</label>
        <input type="radio" id="bottle" name="workType">
        <label for="other">裝採樣瓶</label>
        <input type="radio" id="other" name="workType">
        <label for="other">其他</label>
    </p>

    <p>

        <b>工作時間：</b><input type="time" id="startTime" value="8:00"> ~ <input type="time" id="endTime">
        <input type="text" id="difference"><br>
    </p>

    <p>

        <button onclick="diff()">計算</button>
        <button>清除</button>
    </p>

</body>

</html>

<script>
    var start = document.getElementById("startTime").value;
    var end = document.getElementById("endTime").value;
    
    document.getElementById("startTime").onchange = function () { diff(start, end) };
    document.getElementById("endTime").onchange = function () { diff(start, end) };

    //F = five T=teen
    // var eight = new Date(0, 0, 0, 8, 0, 0);
    // var ten = new Date(0, 0, 0, 10, 0, 0);
    // var tenF = new Date(0, 0, 0, 10, 15, 0);
    // var tweF = new Date(0, 0, 0, 12, 15, 0);
    // var thirdT = new Date(0, 0, 0, 13, 0, 0);
    // var fifT = new Date(0, 0, 0, 15, 0, 0);
    // var fifTF = new Date(0, 0, 0, 15, 15, 0);
    // var selTF = new Date(0, 0, 0, 17, 15, 0);



    function diff(start, end) {
        var start = document.getElementById("startTime").value;
    var end = document.getElementById("endTime").value;

        start = start.split(":");
        end = end.split(":");

        var startDate = new Date(0, 0, 0, start[0], start[1], 0);
        var endDate = new Date(0, 0, 0, end[0], end[1], 0);

        //直接計算
        // var diff = endDate.getTime() - startDate.getTime();
        // var minutes = Math.floor(diff / 1000 / 60);
        // return (minutes < 9 ? "0" : "") + minutes;


        //配合產線調整時間8:00開始
        // if (startDate <= ten && (endDate > ten && endDate <= tenF)) {
        //     return (minutes < 9 ? "0" : "") + minutes - Math.floor((endDate - ten) / 1000 / 60);
        // }
        // if (startDate <= ten && (endDate > tenF && endDate <= tweF)) {
        //     return (minutes < 9 ? "0" : "") + minutes - 15;
        // } 
        // if (startDate <= ten && (endDate > tweF && endDate <= thirdT)) {
        //     return (minutes < 9 ? "0" : "") + minutes - 15 - Math.floor((endDate - tweF) / 1000 / 60);
        // } 
        // if (startDate <= ten && (endDate > fifT && endDate <= fifTF)) {
        //     return (minutes < 9 ? "0" : "") + minutes - 75;
        // }
        // if (startDate <= ten && (endDate > fifT && endDate <= fifTF)) {
        //     return (minutes < 9 ? "0" : "") + minutes - 75 - Math.floor((endDate - tweF) / 1000 / 60);
        // } 
        // if (startDate <= ten && (endDate > fifTF)) {
        //     return (minutes < 9 ? "0" : "") + minutes - 105;
        // }

        //結果以小時：分鐘顯示
        var diff = endDate.getTime() - startDate.getTime();
        var hours = Math.floor(diff / 1000 / 60 / 60);
        diff -= hours * 1000 * 60 * 60;
        var minutes = Math.floor(diff / 1000 / 60);
        return (hours < 9 ? "0" : "") + hours + ":" + (minutes < 9 ? "0" : "") + minutes;
    }



    setInterval(function () { document.getElementById("difference").value = diff(start, end); }, 1000);
//to update time every second (1000 is 1 sec interval and function encasing original code you had down here is because setInterval only reads functions) You can change how fast the time updates by lowering the time interval

</script>